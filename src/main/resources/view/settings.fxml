<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="20.0" stylesheets="@../style.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.dam2.adp.cinesphere.controller.SettingsController">
    <padding>
        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
    </padding>

    <Label styleClass="page-title" text="Ajustes" />

    <TabPane fx:id="tabPane" styleClass="settings-tabs" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
        <Tab text="Mi Perfil">
            <content>
                <VBox spacing="20.0">
                    <padding>
                        <Insets top="20.0" />
                    </padding>
                    <VBox spacing="15.0" styleClass="card">
                        <padding>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </padding>
                        <Label styleClass="section-title" text="Información de la Cuenta" />
                        <GridPane hgap="15.0" vgap="15.0">
                            <columnConstraints>
                                <ColumnConstraints minWidth="120.0" />
                                <ColumnConstraints hgrow="ALWAYS" />
                            </columnConstraints>
                            <Label styleClass="text-normal" text="Usuario:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                            <TextField fx:id="txtUsuario" disable="true" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                            <Label styleClass="text-normal" text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                            <TextField fx:id="txtEmail" promptText="correo@ejemplo.com" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                            <Label styleClass="text-normal" text="Nueva Clave:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                            <PasswordField fx:id="txtPassword" promptText="Dejar vacío para mantener la actual" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        </GridPane>
                        <HBox alignment="CENTER_RIGHT">
                            <Button fx:id="btnGuardarPerfil" styleClass="accent-button" text="Guardar Cambios" />
                        </HBox>
                    </VBox>
                    <VBox styleClass="card-danger" spacing="10.0">
                        <padding>
                            <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                        </padding>
                        <Label styleClass="section-title" text="Zona de Peligro" />
                        <Label styleClass="muted" text="Una vez elimines tu cuenta, no hay vuelta atrás. Por favor, ten cuidado." wrapText="true" />
                        <Button fx:id="btnEliminarCuenta" styleClass="danger-button" text="Eliminar Cuenta" />
                    </VBox>
                </VBox>
            </content>
        </Tab>
        <Tab fx:id="tabImportacion" text="Importación de Datos">
            <content>
                <VBox spacing="20.0">
                    <padding>
                        <Insets top="20.0" />
                    </padding>
                    <VBox spacing="15.0" styleClass="card">
                        <padding>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </padding>
                        <Label styleClass="section-title" text="Cargar desde archivo" />
                        <Label styleClass="text-normal" text="Importa películas desde un archivo CSV local (.csv) a tu base de datos." wrapText="true" />
                        <HBox alignment="CENTER_LEFT" spacing="15.0">
                            <Button fx:id="btnImportarLocal" text="Buscar archivo CSV..." />
                            <Button fx:id="btnDescargarPlantilla" text="Descargar Plantilla" />
                            <Label fx:id="lblEstadoLocal" styleClass="muted" text="No se ha seleccionado archivo" />
                        </HBox>
                    </VBox>
                    <VBox spacing="15.0" styleClass="card">
                        <padding>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </padding>
                        <Label styleClass="section-title" text="Datasets de Ejemplo" />
                        <Label styleClass="text-normal" text="Si no tienes un archivo, puedes cargar uno de nuestros catálogos predeterminados." wrapText="true" />
                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                            <ComboBox fx:id="cbPredeterminados" promptText="Seleccionar catálogo..." />
                            <Button fx:id="btnCargarPredeterminado" styleClass="accent-button" text="Cargar Dataset" />
                        </HBox>
                    </VBox>
                    <VBox spacing="15.0" styleClass="card">
                        <padding>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </padding>
                        <Label styleClass="section-title" text="Gestión Manual" />
                        <Label styleClass="text-normal" text="Añade una nueva película al catálogo rellenando el formulario manualmente." wrapText="true" />
                        <Button fx:id="btnNuevaPelicula" styleClass="accent-button" text="Nueva Película" />
                    </VBox>
                </VBox>
            </content>
        </Tab>
        <Tab fx:id="tabUsuarios" text="Gestión de Usuarios">
            <content>
                <VBox spacing="20.0">
                    <padding>
                        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                    </padding>
                    <Label styleClass="section-title" text="Directorio de Usuarios" />
                    <Label styleClass="text-normal" text="Administra los permisos de los usuarios registrados en la plataforma." />
                    <TableView fx:id="tablaUsuarios" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colId" prefWidth="50.0" text="ID" />
                            <TableColumn fx:id="colNombre" prefWidth="150.0" text="Usuario" />
                            <TableColumn fx:id="colEmail" prefWidth="250.0" text="Email" />
                            <TableColumn fx:id="colRol" prefWidth="100.0" text="Rol" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                    <HBox alignment="CENTER_LEFT" spacing="15.0">
                        <Button fx:id="btnHacerAdmin" styleClass="accent-button" text="⬆ Ascender a Admin" />
                        <Button fx:id="btnHacerUser" text="⬇ Degradar a User" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="btnEliminarUsuario" styleClass="danger-button" text="Eliminar Usuario" />
                    </HBox>
                </VBox>
            </content>
        </Tab>
    </TabPane>
</VBox>
